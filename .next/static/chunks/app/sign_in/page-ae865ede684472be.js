(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[630],{7317:function(e,t,n){Promise.resolve().then(n.bind(n,5519))},5519:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var a=n(7334),s=n(3824),r=n(7009),l=n(2086),c=n(4733),i=n(3780),o=n(5832);function u(){let[e,t]=(0,r.useState)("otp"),[n,u]=(0,r.useState)(""),[d,f]=(0,r.useState)(""),[x,m]=(0,r.useState)(""),[h,p]=(0,r.useState)(!1);async function j(e){e.preventDefault(),p(!0);let t=await (0,l.signIn)("credentials",{phone:n,password:d,redirect:!1});p(!1),(null==t?void 0:t.ok)?location.href="/chat":alert((null==t?void 0:t.error)||"登录失败")}async function v(e){e.preventDefault(),p(!0);let t=await (0,l.signIn)("otp",{phone:n,code:x,redirect:!1});p(!1),(null==t?void 0:t.ok)?location.href="/chat":alert((null==t?void 0:t.error)||"登录失败，请检查手机号与验证码是否正确/未过期")}return(0,a.jsx)("main",{className:"min-h-screen grid place-items-center px-4",children:(0,a.jsxs)(c.Z,{title:"登录 Deepseek",footer:(0,a.jsxs)(a.Fragment,{children:["没有账号？",(0,a.jsxs)(s.default,{className:"text-blue-600",href:"/sign_up",children:[" ","立即注册"," "]})]}),children:[(0,a.jsxs)("div",{className:"flex justify-center gap-6 mb-6 text-sm",children:[(0,a.jsx)("button",{className:"otp"===e?"text-blue-600 font-medium":"text-gray-500",onClick:()=>t("otp"),children:"验证码登录"}),(0,a.jsx)("button",{className:"password"===e?"text-blue-600 font-medium":"text-gray-500",onClick:()=>t("password"),children:"密码登录"})]}),"otp"===e?(0,a.jsxs)("form",{onSubmit:v,className:"space-y-4",children:[(0,a.jsx)(o.I,{placeholder:"请输入手机号",value:n,onChange:e=>u(e.target.value)}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(o.I,{className:"flex-1",placeholder:"请输入验证码",value:x,onChange:e=>m(e.target.value)}),(0,a.jsx)(i.z,{type:"button",onClick:async()=>{let e=await fetch("/api/auth/send-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:n})});if(!e.ok)return alert("发送失败");await e.json(),alert("验证码已发送")},children:"发送验证码"})]}),(0,a.jsx)(i.z,{className:"w-full",disabled:h,children:h?"登录中...":"登录"})]}):(0,a.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,a.jsx)(o.I,{placeholder:"请输入手机号",value:n,onChange:e=>u(e.target.value)}),(0,a.jsx)(o.I,{type:"password",placeholder:"请输入密码",value:d,onChange:e=>f(e.target.value)}),(0,a.jsx)(i.z,{className:"w-full",disabled:h,children:h?"登录中...":"登录"})]})]})})}},4733:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var a=n(7334);function s(e){let{title:t,children:n,footer:s}=e;return(0,a.jsxs)("div",{className:"card w-full max-w-xl p-10",children:[(0,a.jsxs)("div",{className:"mb-6 text-center",children:[(0,a.jsx)("div",{className:"mx-auto mb-2 h-12 w-12 rounded-full bg-blue-500"}),(0,a.jsx)("div",{className:"text-2xl font-semibold",children:"deepseek"})]}),(0,a.jsx)("div",{className:"mb-4 text-center text-sm text-gray-500",children:t}),n,s&&(0,a.jsx)("div",{className:"mt-6 text-center text-sm text-gray-500",children:s})]})}},3780:function(e,t,n){"use strict";n.d(t,{z:function(){return s}});var a=n(7334);let s=(0,n(7009).forwardRef)(function(e,t){let{className:n="",variant:s="primary",...r}=e;return(0,a.jsx)("button",{ref:t,...r,className:"".concat("primary"===s?"btn-primary":"px-3 py-2 rounded-md hover:bg-gray-100"," ").concat(n)})})},5832:function(e,t,n){"use strict";n.d(t,{I:function(){return r},g:function(){return l}});var a=n(7334),s=n(7009);let r=(0,s.forwardRef)(function(e,t){let{className:n="",...s}=e;return(0,a.jsx)("input",{ref:t,...s,className:"input ".concat(n)})}),l=(0,s.forwardRef)(function(e,t){let{className:n="",...s}=e;return(0,a.jsx)("textarea",{ref:t,...s,className:"input ".concat(n)})})}},function(e){e.O(0,[24,469,856,759,744],function(){return e(e.s=7317)}),_N_E=e.O()}]);